(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5247:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>g,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>l}),t(2232),t(7764),t(5866);var i=t(3191),r=t(8716),n=t(7922),o=t.n(n),a=t(5231),d={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);t.d(s,d);let l=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2232)),"/Users/ayushanand/Developer/instagram-bot/frontend/app/page.js"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7764)),"/Users/ayushanand/Developer/instagram-bot/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ayushanand/Developer/instagram-bot/frontend/app/page.js"],p="/page",g={require:t,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4464:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,9404,23))},8200:(e,s,t)=>{Promise.resolve().then(t.bind(t,8256))},8800:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},8256:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var i=t(326),r=t(7577);let n=process.env.NEXT_PUBLIC_API_BASE_URL||"https://instagram-bot-xmt8.onrender.com";function o(){let[e,s]=(0,r.useState)("login"),[t,o]=(0,r.useState)(""),[a,d]=(0,r.useState)(""),[l,c]=(0,r.useState)("reviewer@example.com"),[p,g]=(0,r.useState)("Reviewer123"),[u,m]=(0,r.useState)([]),[h,x]=(0,r.useState)(""),[f,y]=(0,r.useState)(null),[j,v]=(0,r.useState)(null),[b,S]=(0,r.useState)(""),[w,z]=(0,r.useState)(!1),[C,_]=(0,r.useState)([]),[D,P]=(0,r.useState)(""),[k,T]=(0,r.useState)(null),[I,B]=(0,r.useState)([]),[R,U]=(0,r.useState)(""),[A,W]=(0,r.useState)(!1),[$,M]=(0,r.useState)(""),[q,E]=(0,r.useState)(""),F="#f5cd4c",L="#000000",N=async(e,s={})=>{let i=await fetch(`${n}${e}`,{...s,headers:{"Content-Type":"application/json",...s.headers||{},...t?{Authorization:`Bearer ${t}`}:{}}}),r=await i.json().catch(()=>({}));if(!i.ok){let e=Error(r.message||r.error?.message||r.errors?.[0]||`Request failed with ${i.status}`);throw e.status=i.status,e.data=r,e}return r},O=async e=>{e.preventDefault(),d("");try{let e=await N("/v1/auth/login",{method:"POST",body:JSON.stringify({email:l,password:p}),headers:{"Content-Type":"application/json"}});o(e.tokens.access.token),s("accounts")}catch(e){d(e.message)}},G=async()=>{x("");try{let e=await N("/v1/instagram");m(e)}catch(e){x(e.message)}},H=async e=>{z(!0),S("");try{let s=await N(`/v1/instagram/${e.id}/profile`);v(s)}catch(e){S(e.message)}finally{z(!1)}},J=async e=>{y(e),T(null),B([]),v(null),s("conversations"),await V(e),await H(e)},Y=async e=>{T(e),await X(e.id)},V=async e=>{P("");try{let s=await N(`/v1/conversations/${e.id}`);_(s)}catch(e){P(e.message)}},X=async e=>{U("");try{let s=await N(`/v1/messages/${e}`);B([...s].reverse())}catch(e){U(e.message)}},K=async e=>{if(e.preventDefault(),f&&k&&$.trim()){E("Sending…");try{await N(`/v1/messages/${k.id}`,{method:"POST",body:JSON.stringify({text:$.trim()})}),E("✅ Message sent successfully!"),M(""),await V(f),k?.id&&await X(k.id)}catch(r){let e=r.message||"";e.toLowerCase();let s=r.data||{},t=(s.error?.message||"").toLowerCase(),i=`${e} ${t}`.toLowerCase();i.includes("permission")||i.includes("instagram_manage_messages")||i.includes("requires")||i.includes("capability")||i.includes("advanced access")||i.includes("(#200)")||i.includes("(#10)")||i.includes("endpoint requires")||i.includes("does not have the capability")?E("❌ Cannot send: The instagram_manage_messages permission is not yet approved by Meta. This is expected during App Review - once the permission is granted, this same API call will work successfully."):i.includes("forbidden")||403===r.status?E("❌ Cannot send: Permission denied. The instagram_manage_messages permission may not be approved yet."):E(`❌ Send failed: ${r.message}`)}}},Q=i.jsx("div",{style:{background:F,borderBottom:"1px solid rgba(0,0,0,0.08)"},children:i.jsx("div",{style:{maxWidth:900,margin:"0 auto",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:i.jsx("div",{style:{fontWeight:700,color:L},children:"Instagram DM"})})});return(0,i.jsxs)(i.Fragment,{children:[Q,i.jsx("main",{style:{padding:"16px 12px 40px"},children:(0,i.jsxs)("section",{style:{maxWidth:900,margin:"24px auto",padding:24,borderRadius:12,background:"white",boxShadow:"0 12px 30px rgba(0,0,0,0.08)"},children:["login"===e&&(0,i.jsxs)(i.Fragment,{children:[i.jsx("h2",{style:{marginTop:0,color:L},children:"Step 1 \xb7 Login (JWT)"}),(0,i.jsxs)("p",{style:{fontSize:14,color:"#555"},children:["This form calls ",i.jsx("code",{children:"/v1/auth/login"})," on the backend and stores the"," ",i.jsx("code",{children:"access.token"}),". Meta reviewers can use the same credentials:"]}),(0,i.jsxs)("ul",{style:{fontSize:14,color:"#333"},children:[(0,i.jsxs)("li",{children:["Email: ",i.jsx("code",{children:"reviewer@example.com"})]}),(0,i.jsxs)("li",{children:["Password: ",i.jsx("code",{children:"Reviewer123"})]})]}),(0,i.jsxs)("form",{onSubmit:O,style:{marginTop:16},children:[(0,i.jsxs)("div",{style:{marginBottom:12},children:[i.jsx("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Email"}),i.jsx("input",{value:l,onChange:e=>c(e.target.value),type:"email",style:{width:"100%",padding:"8px 10px",borderRadius:6,border:"1px solid #ccc"}})]}),(0,i.jsxs)("div",{style:{marginBottom:16},children:[i.jsx("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Password"}),i.jsx("input",{value:p,onChange:e=>g(e.target.value),type:"password",style:{width:"100%",padding:"8px 10px",borderRadius:6,border:"1px solid #ccc"}})]}),a&&i.jsx("p",{style:{color:"red",fontSize:13,marginBottom:8},children:a}),i.jsx("button",{type:"submit",style:{background:L,color:"white",border:"none",padding:"8px 16px",borderRadius:999,cursor:"pointer",fontSize:14},children:"Login and fetch accounts"})]})]}),"accounts"===e&&(0,i.jsxs)(i.Fragment,{children:[i.jsx("h2",{style:{marginTop:0,color:L},children:"Step 2 \xb7 Connected Instagram account"}),(0,i.jsxs)("p",{style:{fontSize:14,color:"#555"},children:["This view calls ",i.jsx("code",{children:"/v1/instagram"})," with the JWT and shows the connected business account."]}),i.jsx("button",{onClick:G,style:{background:L,color:"white",border:"none",padding:"6px 14px",borderRadius:999,cursor:"pointer",fontSize:13,marginBottom:12},children:"Load accounts"}),h&&i.jsx("p",{style:{color:"red",fontSize:13,marginBottom:8},children:h}),(0,i.jsxs)("div",{children:[u.map(e=>(0,i.jsxs)("div",{style:{borderRadius:8,border:"1px solid #ddd",padding:12,marginBottom:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{children:[i.jsx("div",{style:{fontWeight:600},children:e.username||e.instagramBusinessId}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#777"},children:["ID: ",i.jsx("code",{children:e.instagramBusinessId})]})]}),i.jsx("button",{onClick:()=>J(e),style:{background:F,border:"none",padding:"6px 12px",borderRadius:999,cursor:"pointer",fontSize:13},children:"View conversations"})]},e.id)),0===u.length&&!h&&i.jsx("p",{style:{fontSize:13,color:"#666"},children:"No accounts loaded yet."})]})]}),"conversations"===e&&f&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{style:{marginTop:0,color:L},children:"Step 3 \xb7 Conversations & messages"}),(0,i.jsxs)("p",{style:{fontSize:14,color:"#555"},children:["This view calls ",i.jsx("code",{children:"/v1/conversations/<accountId>"})," to list conversations. Each conversation shows the username fetched via"," ",i.jsx("code",{children:"instagram_basic"})," plus recent messages received via"," ",i.jsx("code",{children:"instagram_manage_messages"}),". Auto-refreshes every 8 seconds."]}),f&&(0,i.jsxs)("div",{style:{marginTop:8,fontSize:13,fontWeight:600,color:L},children:["\uD83D\uDCF1 Account: @",f.username||f.instagramBusinessId," (ID: ",f.instagramBusinessId,")"]})]}),A&&i.jsx("span",{style:{fontSize:12,color:"#666"},children:"\uD83D\uDD04 Refreshing..."})]}),f&&(0,i.jsxs)("div",{style:{marginBottom:16,padding:16,borderRadius:8,border:"2px solid #f5cd4c",background:"#fffef5"},children:[(0,i.jsxs)("h3",{style:{marginTop:0,fontSize:16,color:L},children:["\uD83D\uDCCA Profile Details for @",f.username||f.instagramBusinessId," (via instagram_basic permission)"]}),w&&i.jsx("p",{style:{fontSize:13,color:"#666"},children:"Loading profile..."}),b&&(0,i.jsxs)("p",{style:{color:"red",fontSize:13},children:["Error loading profile: ",b]}),j&&(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:12,fontSize:13},children:[j.profilePictureUrl&&i.jsx("img",{src:j.profilePictureUrl,alt:"Profile",style:{width:80,height:80,borderRadius:"50%",border:"2px solid #f5cd4c",gridRow:"span 4"}}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Handle:"})," @",j.username]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Name:"})," ",j.name||"N/A"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Bio:"})," ",j.biography||"No bio"]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Followers:"})," ",j.followersCount?.toLocaleString()||0]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Posts:"})," ",j.mediaCount||0]}),j.website&&(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Website:"})," ",i.jsx("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",style:{color:"#0066cc"},children:j.website})]}),(0,i.jsxs)("div",{style:{gridColumn:"span 2",marginTop:8},children:[(0,i.jsxs)("strong",{children:["Recent Media for @",j.username," (via instagram_basic):"]}),j.media&&j.media.length>0?i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:8,marginTop:8},children:j.media.map(e=>(0,i.jsxs)("div",{style:{aspectRatio:"1",borderRadius:4,overflow:"hidden",border:"1px solid #ddd",background:"#f5f5f5",position:"relative"},children:[e.media_url&&i.jsx("img",{src:e.media_url,alt:e.caption||"Post",style:{width:"100%",height:"100%",objectFit:"cover"}}),e.media_type&&i.jsx("div",{style:{position:"absolute",top:4,right:4,background:"rgba(0,0,0,0.6)",color:"white",fontSize:10,padding:"2px 4px",borderRadius:3},children:"VIDEO"===e.media_type?"▶":"\uD83D\uDCF7"})]},e.id))}):i.jsx("p",{style:{fontSize:12,color:"#666",marginTop:4},children:"No media found"})]})]})]}),i.jsx("button",{onClick:()=>s("accounts"),style:{background:"transparent",color:L,border:"1px solid #ccc",padding:"4px 10px",borderRadius:999,cursor:"pointer",fontSize:12,marginBottom:12},children:"← Back to accounts"}),D&&i.jsx("p",{style:{color:"red",fontSize:13,marginBottom:8},children:D}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.3fr) minmax(0, 1.7fr)",gap:16},children:[(0,i.jsxs)("div",{style:{borderRadius:8,border:"1px solid #eee",maxHeight:260,overflowY:"auto",padding:8,background:"#faf7ee"},children:[C.map(e=>(0,i.jsxs)("div",{onClick:()=>Y(e),style:{padding:8,borderRadius:6,marginBottom:6,cursor:"pointer",background:k&&k.id===e.id?F:"white",border:"1px solid #e2d5aa",fontSize:13,position:"relative"},children:[(0,i.jsxs)("div",{style:{fontWeight:600,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("span",{children:["@",e.igUsername||`user_${e.igUserId?.slice(-6)}`]}),e.unreadCount>0&&i.jsx("span",{style:{background:"#ff4444",color:"white",borderRadius:"50%",width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:700},children:e.unreadCount})]}),i.jsx("div",{style:{color:"#555",marginTop:2,fontSize:12},children:e.lastMessage||"(no preview)"})]},e.id)),0===C.length&&!D&&i.jsx("p",{style:{fontSize:13,color:"#666",padding:8},children:"No conversations yet. Send a DM to this Instagram business account from your phone to create one."})]}),i.jsx("div",{style:{borderRadius:8,border:"1px solid #eee",padding:10,background:"white",minHeight:220,display:"flex",flexDirection:"column"},children:k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{marginBottom:8,borderBottom:"1px solid #eee",paddingBottom:8},children:[(0,i.jsxs)("div",{style:{fontWeight:600,fontSize:14},children:["Conversation with @",k.igUsername||`user_${k.igUserId?.slice(-6)}`]}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#777"},children:["igUserId: ",i.jsx("code",{children:k.igUserId})]}),f&&(0,i.jsxs)("div",{style:{fontSize:12,color:L,marginTop:4,fontWeight:600},children:["\uD83D\uDCF1 Sending from: @",f.username||f.instagramBusinessId," (ID: ",f.instagramBusinessId,")"]})]}),(0,i.jsxs)("div",{style:{flex:1,overflowY:"auto",maxHeight:300,marginBottom:12,padding:"8px 0",border:"1px solid #f0f0f0",borderRadius:6,background:"#fafafa"},children:[R&&i.jsx("p",{style:{color:"red",fontSize:12,padding:8},children:R}),0===I.length&&!R&&i.jsx("p",{style:{fontSize:12,color:"#666",padding:8,textAlign:"center"},children:"No messages yet. Messages will appear here when received via webhook."}),I.map(e=>(0,i.jsxs)("div",{style:{padding:"6px 10px",margin:"4px 8px",borderRadius:8,background:"user"===e.sender?"#e3f2fd":"#fff9c4",alignSelf:"user"===e.sender?"flex-start":"flex-end",maxWidth:"80%",fontSize:13},children:[i.jsx("div",{style:{fontWeight:600,fontSize:11,color:"#666",marginBottom:2},children:"user"===e.sender?`Customer (@${k.igUsername||`user_${k.igUserId?.slice(-6)}`})`:`You (from @${f?.username||f?.instagramBusinessId})`}),i.jsx("div",{style:{color:"#333"},children:e.text||"(no text)"}),e.attachments&&e.attachments.length>0&&(0,i.jsxs)("div",{style:{fontSize:11,color:"#777",marginTop:4},children:["\uD83D\uDCCE ",e.attachments.length," attachment(s)"]}),i.jsx("div",{style:{fontSize:10,color:"#999",marginTop:4},children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))]}),(0,i.jsxs)("form",{onSubmit:K,style:{marginTop:"auto"},children:[(0,i.jsxs)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:["Send reply from @",f?.username||f?.instagramBusinessId," (uses ",i.jsx("code",{children:"instagram_manage_messages"}),")"]}),i.jsx("textarea",{value:$,onChange:e=>M(e.target.value),rows:2,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc",resize:"vertical",fontSize:13},placeholder:"Type a reply to send via the Graph API…"}),(0,i.jsxs)("div",{style:{marginTop:8,display:"flex",alignItems:"center",gap:8},children:[i.jsx("button",{type:"submit",style:{background:L,color:"white",border:"none",padding:"6px 14px",borderRadius:999,cursor:"pointer",fontSize:13},children:"Send reply"}),q&&i.jsx("span",{style:{fontSize:12,color:"#555"},children:q})]})]})]}):i.jsx("p",{style:{fontSize:13,color:"#666"},children:"Select a conversation from the left to see messages and send a reply."})})]})]})]})})]})}},7764:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,metadata:()=>n});var i=t(9510);t(7272);var r=t(7371);let n={title:"Instagram DM",description:"Instagram DM UI"};function o({children:e}){return i.jsx("html",{lang:"en",children:(0,i.jsxs)("body",{style:{margin:0,fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, sans-serif",backgroundColor:"#f5f5f5",display:"flex",flexDirection:"column",minHeight:"100vh"},children:[i.jsx("div",{style:{flex:1},children:e}),i.jsx("footer",{style:{background:"#f5cd4c",borderTop:"1px solid rgba(0,0,0,0.08)",padding:"12px 24px",textAlign:"center",fontSize:"12px",color:"#000000",marginTop:"auto"},children:(0,i.jsxs)("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[i.jsx(r.default,{href:"/privacy-policy",style:{color:"#000000",textDecoration:"underline",fontWeight:500},children:"Privacy Policy"}),i.jsx("span",{style:{margin:"0 8px"},children:"•"}),i.jsx(r.default,{href:"/terms-of-service",style:{color:"#000000",textDecoration:"underline",fontWeight:500},children:"Terms of Service"}),i.jsx("span",{style:{margin:"0 8px"},children:"•"}),i.jsx("span",{children:"Instagram DM Automation by SMARTBREW"})]})})]})})}},2232:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>o,__esModule:()=>n,default:()=>a});var i=t(8570);let r=(0,i.createProxy)(String.raw`/Users/ayushanand/Developer/instagram-bot/frontend/app/page.js`),{__esModule:n,$$typeof:o}=r;r.default;let a=(0,i.createProxy)(String.raw`/Users/ayushanand/Developer/instagram-bot/frontend/app/page.js#default`)},7272:()=>{}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[991],()=>t(5247));module.exports=i})();